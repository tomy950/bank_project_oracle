-- Generated by Oracle SQL Developer Data Modeler 4.1.3.901
--   at:        2017-05-08 16:18:37 CEST
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g




CREATE TABLE ADRESA
  (
    ID_ADRESE NUMBER (8) NOT NULL ,
    Ime_drzave NVARCHAR2 (40) ,
    Ime_grada NVARCHAR2 (30) ,
    Postanski_broj NUMBER (8) ,
    Ulica          VARCHAR2 (30)
  ) ;
ALTER TABLE ADRESA ADD CONSTRAINT Adresa_PK PRIMARY KEY ( ID_ADRESE ) ;


CREATE TABLE BANKA
  (
    ID_BANKE NUMBER (7) NOT NULL ,
    Naziv NVARCHAR2 (20) NOT NULL ,
    Kontakt NUMBER (15)
  ) ;
ALTER TABLE BANKA ADD CONSTRAINT BANKA_PK PRIMARY KEY ( ID_BANKE ) ;


CREATE TABLE KLIJENT
  (
    ID_KLIJENT NUMBER (8) NOT NULL ,
    Ime        VARCHAR2 (30) ,
    Prezime    VARCHAR2 (35) ,
    Spol       CHAR (2) ,
    Kontakt NVARCHAR2 (15) ,
    Adresa_ID_ADRESE NUMBER (8) NOT NULL
  ) ;
ALTER TABLE KLIJENT ADD CONSTRAINT KLIJENT_PK PRIMARY KEY ( ID_KLIJENT ) ;


CREATE TABLE PODRUZNICA
  (
    ID_PODRUZNICE     NUMBER (8) NOT NULL ,
    Tip_podruznice    VARCHAR2 (10) ,
    Br_telefona       NUMBER (9) ,
    BANKA_ID_BANKE    NUMBER (7) NOT NULL ,
    Adresa_ID_ADRESE  NUMBER (8) NOT NULL ,
    Detalji           VARCHAR2 (40) ,
    Adresa_ID_ADRESE1 NUMBER (8) NOT NULL
  ) ;
CREATE UNIQUE INDEX PODRUZNICA__IDX ON PODRUZNICA
  (
    Adresa_ID_ADRESE1 ASC
  )
  ;
ALTER TABLE PODRUZNICA ADD CONSTRAINT PODRUZNICA_PK PRIMARY KEY ( ID_PODRUZNICE ) ;


CREATE TABLE RACUN
  (
    ID_RACUNA                NUMBER (8) NOT NULL ,
    Datum_otvaranja          DATE ,
    TIP_RACUNA_ID_TIPA       NUMBER (8) NOT NULL ,
    KLIJENT_ID_KLIJENT       NUMBER (8) NOT NULL ,
    PODRUZNICA_ID_PODRUZNICE NUMBER (8) NOT NULL ,
    TEKUCI_RACUN_ID_TEKUCI   NUMBER (20) NOT NULL
  ) ;
CREATE UNIQUE INDEX RACUN__IDX ON RACUN
  (
    TEKUCI_RACUN_ID_TEKUCI ASC
  )
  ;
ALTER TABLE RACUN ADD CONSTRAINT RACUN_PK PRIMARY KEY ( ID_RACUNA ) ;


CREATE TABLE STEDNA_KNJIZICA
  (
    ID_STEDNJE         NUMBER (7) NOT NULL ,
    KLIJENT_ID_KLIJENT NUMBER (8) NOT NULL ,
    Valuta_stednje     VARCHAR2 (10) ,
    Iznos              VARCHAR2 (40) ,
    Uplata             VARCHAR2 (20) ,
    Isplata            VARCHAR2 (30) ,
    Datum_otvaranja    DATE ,
    Kamatna_stopa      VARCHAR2 (5)
  ) ;
ALTER TABLE STEDNA_KNJIZICA ADD CONSTRAINT STEDNA_KNJIZICA_PK PRIMARY KEY ( ID_STEDNJE ) ;


CREATE TABLE TEKUCI_RACUN
  (
    ID_TEKUCI      NUMBER (20) NOT NULL ,
    Broj_Racuna    VARCHAR2 (20) ,
    Valuta         VARCHAR2 (5) ,
    Kamatna_stopa  VARCHAR2 (10) ,
    Redovna_uplata VARCHAR2 (15) ,
    Ostale_uplate  VARCHAR2 (30) ,
    Iznos_racuna NVARCHAR2 (30) ,
    Dozvoljeni_minus NVARCHAR2 (10)
  ) ;
ALTER TABLE TEKUCI_RACUN ADD CONSTRAINT TEKUCI_RACUN_PK PRIMARY KEY ( ID_TEKUCI ) ;


CREATE TABLE TIP_TRANSAKCIJE
  (
    ID_TIPA NUMBER (6) NOT NULL ,
    Naziv   VARCHAR2 (15) ,
    Opis    VARCHAR2 (40)
  ) ;
ALTER TABLE TIP_TRANSAKCIJE ADD CONSTRAINT TIP_TRANSAKCIJE_PK PRIMARY KEY ( ID_TIPA ) ;


CREATE TABLE TRANSAKCIJA
  (
    ID_TRANSAKCIJE          NUMBER (8) NOT NULL ,
    Datum                   DATE ,
    Racun_primatelja        VARCHAR2 (40) ,
    Iznos                   VARCHAR2 (40) ,
    RACUN_ID_RACUNA         NUMBER (8) NOT NULL ,
    TIP_TRANSAKCIJE_ID_TIPA NUMBER (6) NOT NULL
  ) ;
ALTER TABLE TRANSAKCIJA ADD CONSTRAINT TRANSAKCIJA_PK PRIMARY KEY ( ID_TRANSAKCIJE ) ;


CREATE TABLE ZAPOSLENIK
  (
    ID_ZAPOSLENIKA           NUMBER (9) NOT NULL ,
    Ime                      VARCHAR2 (25) ,
    Prezime                  VARCHAR2 (30) ,
    Odjel                    VARCHAR2 (20) ,
    Adresa_ID_ADRESE         NUMBER (8) NOT NULL ,
    PODRUZNICA_ID_PODRUZNICE NUMBER (8) NOT NULL
  ) ;
ALTER TABLE ZAPOSLENIK ADD CONSTRAINT ZAPOSLENIK_PK PRIMARY KEY ( ID_ZAPOSLENIKA ) ;


CREATE TABLE ZIRO_RACUN
  (
    ID_ZIRO         NUMBER (15) NOT NULL ,
    RACUN_ID_RACUNA NUMBER (8) NOT NULL ,
    Valuta          VARCHAR2 (10) ,
    Broj_Racuna     VARCHAR2 (20) ,
    Isplata         VARCHAR2 (20) ,
    Iznos_racuna NVARCHAR2 (30)
  ) ;
CREATE UNIQUE INDEX ZIRO_RACUN__IDX ON ZIRO_RACUN
  (
    RACUN_ID_RACUNA ASC
  )
  ;
ALTER TABLE ZIRO_RACUN ADD CONSTRAINT ZIRO_RACUN_PK PRIMARY KEY ( ID_ZIRO ) ;


ALTER TABLE KLIJENT ADD CONSTRAINT KLIJENT_Adresa_FK FOREIGN KEY ( Adresa_ID_ADRESE ) REFERENCES ADRESA ( ID_ADRESE ) ;

ALTER TABLE PODRUZNICA ADD CONSTRAINT PODRUZNICA_Adresa_FKv1 FOREIGN KEY ( Adresa_ID_ADRESE1 ) REFERENCES ADRESA ( ID_ADRESE ) ;

ALTER TABLE PODRUZNICA ADD CONSTRAINT PODRUZNICA_BANKA_FK FOREIGN KEY ( BANKA_ID_BANKE ) REFERENCES BANKA ( ID_BANKE ) ;

ALTER TABLE RACUN ADD CONSTRAINT RACUN_KLIJENT_FK FOREIGN KEY ( KLIJENT_ID_KLIJENT ) REFERENCES KLIJENT ( ID_KLIJENT ) ;

ALTER TABLE RACUN ADD CONSTRAINT RACUN_PODRUZNICA_FK FOREIGN KEY ( PODRUZNICA_ID_PODRUZNICE ) REFERENCES PODRUZNICA ( ID_PODRUZNICE ) ;

ALTER TABLE RACUN ADD CONSTRAINT RACUN_TEKUCI_RACUN_FK FOREIGN KEY ( TEKUCI_RACUN_ID_TEKUCI ) REFERENCES TEKUCI_RACUN ( ID_TEKUCI ) ;

ALTER TABLE STEDNA_KNJIZICA ADD CONSTRAINT STEDNA_KNJIZICA_KLIJENT_FK FOREIGN KEY ( KLIJENT_ID_KLIJENT ) REFERENCES KLIJENT ( ID_KLIJENT ) ;

ALTER TABLE TRANSAKCIJA ADD CONSTRAINT TRANSAKCIJA_RACUN_FK FOREIGN KEY ( RACUN_ID_RACUNA ) REFERENCES RACUN ( ID_RACUNA ) ;

ALTER TABLE TRANSAKCIJA ADD CONSTRAINT TRANSAKCIJA_TIP_TRANSAKCIJE_FK FOREIGN KEY ( TIP_TRANSAKCIJE_ID_TIPA ) REFERENCES TIP_TRANSAKCIJE ( ID_TIPA ) ;

ALTER TABLE ZAPOSLENIK ADD CONSTRAINT ZAPOSLENIK_Adresa_FK FOREIGN KEY ( Adresa_ID_ADRESE ) REFERENCES ADRESA ( ID_ADRESE ) ;

ALTER TABLE ZAPOSLENIK ADD CONSTRAINT ZAPOSLENIK_PODRUZNICA_FK FOREIGN KEY ( PODRUZNICA_ID_PODRUZNICE ) REFERENCES PODRUZNICA ( ID_PODRUZNICE ) ;

ALTER TABLE ZIRO_RACUN ADD CONSTRAINT ZIRO_RACUN_RACUN_FK FOREIGN KEY ( RACUN_ID_RACUNA ) REFERENCES RACUN ( ID_RACUNA ) ;

CREATE SEQUENCE ADRESA_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER ADRESA_TRG BEFORE
  INSERT ON ADRESA FOR EACH ROW WHEN (NEW.ID_ADRESE IS NULL) BEGIN :NEW.ID_ADRESE := ADRESA_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE BANKA_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER BANKA_TRG BEFORE
  INSERT ON BANKA FOR EACH ROW WHEN (NEW.ID_BANKE IS NULL) BEGIN :NEW.ID_BANKE := BANKA_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE KLIJENT_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER KLIJENT_TRGG BEFORE
  INSERT ON KLIJENT FOR EACH ROW WHEN (NEW.ID_KLIJENT IS NULL) BEGIN :NEW.ID_KLIJENT := KLIJENT_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE PODRUZNICA_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER PODRUZNICA_TRG BEFORE
  INSERT ON PODRUZNICA FOR EACH ROW WHEN (NEW.ID_PODRUZNICE IS NULL) BEGIN :NEW.ID_PODRUZNICE := PODRUZNICA_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE RACUN_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER RACUN_TRG BEFORE
  INSERT ON RACUN FOR EACH ROW WHEN (NEW.ID_RACUNA IS NULL) BEGIN :NEW.ID_RACUNA := RACUN_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE STEDNJA_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER STEDNJA_TRG BEFORE
  INSERT ON STEDNA_KNJIZICA FOR EACH ROW WHEN (NEW.ID_STEDNJE IS NULL) BEGIN :NEW.ID_STEDNJE := STEDNJA_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE TEKUCI_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER TEKUCI_TRG BEFORE
  INSERT ON TEKUCI_RACUN FOR EACH ROW WHEN (NEW.ID_TEKUCI IS NULL) BEGIN :NEW.ID_TEKUCI := TEKUCI_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE TIP_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER TIP_TRG BEFORE
  INSERT ON TIP_TRANSAKCIJE FOR EACH ROW WHEN (NEW.ID_TIPA IS NULL) BEGIN :NEW.ID_TIPA := TIP_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE TRANSAKCIJA_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER TRANSAKCIJA_TRG BEFORE
  INSERT ON TRANSAKCIJA FOR EACH ROW WHEN (NEW.ID_TRANSAKCIJE IS NULL) BEGIN :NEW.ID_TRANSAKCIJE := TRANSAKCIJA_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE ZAPOSLENIK_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER ZAPOSLENIK_TRG BEFORE
  INSERT ON ZAPOSLENIK FOR EACH ROW WHEN (NEW.ID_ZAPOSLENIKA IS NULL) BEGIN :NEW.ID_ZAPOSLENIKA := ZAPOSLENIK_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE ZIRO_SEQ START WITH 1 MINVALUE 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER ZIRO_TRG BEFORE
  INSERT ON ZIRO_RACUN FOR EACH ROW WHEN (NEW.ID_ZIRO IS NULL) BEGIN :NEW.ID_ZIRO := ZIRO_SEQ.NEXTVAL;
END;
/


-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            11
-- CREATE INDEX                             3
-- ALTER TABLE                             23
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                          11
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                         11
-- CREATE MATERIALIZED VIEW                 0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS  


INSERT INTO
BANKA 
VALUES (
BANKA_SEQ.nextval,
'OTPbanka',
'003852919195'

);

INSERT INTO
KLIJENT 
VALUES (
KLIJENT_SEQ.nextval,
'Marko',
'Markoviæ',
'M',
'00385923300220',
'9'

);
INSERT INTO
KLIJENT 
VALUES (
KLIJENT_SEQ.nextval,
'Saša',
'Matiæ',
'M',
'0038592339087',
'14'

);
INSERT INTO
KLIJENT 
VALUES (
KLIJENT_SEQ.nextval,
'Mate',
'Pojeta',
'M',
'00385923344770',
'10'

);

INSERT INTO
KLIJENT 
VALUES (
KLIJENT_SEQ.nextval,
'Ivan',
'Ivanoviæ',
'M',
'00385923344900',
'12'

);
INSERT INTO
ZAPOSLENIK
VALUES (
ZAPOSLENIK_SEQ.nextval,
'Marina',
'Lonèar',
'Odjel za informatiku',
'00385923344555',
'11',


);
INSERT INTO
PODRUZNICA 
VALUES (
PODRUZNICA_SEQ.nextval,
'Lokalna',
'0218917109',
'3',
'11',
'Banka za lokalne klijente u gradu Splitu'
'2'

);

UPDATE KLIJENT
SET Spol='Z'
WHERE ID_KLIJENT=9;


Delete from KLIJENT
where ID_KLIJENT=10;


select *
from KLIJENT



INSERT INTO
ADRESA
VALUES (
ADRESA_SEQ.nextval,
'Hrvatska',
'Split',
'21000',
'kralja Zvonimira 54'



);
INSERT INTO
ADRESA
VALUES (
ADRESA_SEQ.nextval,
'Hrvatska',
'Split',
'21000',
'Vukovarska 304'



);
INSERT INTO
ADRESA
VALUES (
ADRESA_SEQ.nextval,
'Hrvatska',
'Split',
'21000',
'Velebitska 8'



);
INSERT INTO
ADRESA
VALUES (
ADRESA_SEQ.nextval,
'Hrvatska',
'Split',
'21000',
'Bruna Bušiæa 43'



);
INSERT INTO
ADRESA
VALUES (
ADRESA_SEQ.nextval,
'Hrvatska',
'Split',
'21000',
'Studinova 7'



);

select Ime ,Kontakt
from KLIJENT;


INSERT INTO
ADRESA
VALUES (
ADRESA_SEQ.nextval,
'Hrvatska',
'Split',
'21000',
'Poljièka 12'
);
 
DELETE FROM BANKA
WHERE ID_BANKE=1;



SELECT *
FROM KLIJENT

